var header=document.getElementById("header");window.addEventListener("scroll",function(e){e.currentTarget.scrollY>=250?(header.style.transition="top .6s",header.style.top="-100px"):e.currentTarget.scrollY<250&&(header.style.transition="top .6s cubic-bezier(0.4, 0.07, 0.6, 1.29)",header.style.top="-10px")},!1);var cgvpopup=document.getElementById("cgvpopup"),popUpCGV=document.getElementById("popUpCGV"),overlay=document.getElementById("overlay");cgvpopup.addEventListener("click",function(e){e.preventDefault(),overlay.style.visibility="visible",popUpCGV.style.visibility="visible",popUpCGV.style.opacity=1,popUpCGV.style.transition="opacity .5s;"},!1),overlay.addEventListener("click",function(e){popUpCGV.style.visibility="hidden",popUpCGV.style.opacity=0,e.currentTarget.style.visibility="hidden"},!1);var popUpML=document.getElementById("popUpML"),ML=document.getElementById("ML");ML.addEventListener("click",function(e){e.preventDefault(),overlay.style.visibility="visible",popUpML.style.visibility="visible",popUpML.style.opacity=1,popUpML.style.transition="opacity .5s;"},!1),overlay.addEventListener("click",function(e){popUpML.style.visibility="hidden",popUpML.style.opacity=0,e.currentTarget.style.visibility="hidden"},!1);var formTrashProfil=document.getElementById("formTrashProfil");if(formTrashProfil){var trashProfil=document.getElementById("trashProfil"),IDTrashProfil=encodeURIComponent(document.getElementById("IDTrashProfil").value),popUpDeleteProfil=document.getElementById("popUpDeleteProfil");formTrashProfil.addEventListener("submit",function(e){e.preventDefault(),overlay.style.visibility="visible",popUpDeleteProfil.style.visibility="visible",popUpDeleteProfil.style.opacity=1,popUpDeleteProfil.style.top="50%",popUpDeleteProfil.style.marginTop="-150px";var t=document.getElementById("btnNON"),r=document.getElementById("btnOUI");t.addEventListener("click",function(e){popUpDeleteProfil.style.visibility="hidden",popUpDeleteProfil.style.opacity=0,popUpDeleteProfil.style.top=0,overlay.style.visibility="hidden"},!1),r.addEventListener("click",function(e){xhr=new XMLHttpRequest,xhr.open("POST","/game_zone/controleurs/trash-profil-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("id_membre="+IDTrashProfil),xhr.addEventListener("readystatechange",function(){if(4===xhr.readyState&&200===xhr.status){JSON.parse(xhr.responseText);document.location.href="/game_zone/accueil"}else console.log(xhr)},!1)},!1),overlay.addEventListener("click",function(e){popUpDeleteProfil.style.visibility="hidden",popUpDeleteProfil.style.opacity=0,popUpDeleteProfil.style.top=0,e.currentTarget.style.visibility="hidden"},!1)},!1)}var inputsRequired=document.querySelectorAll('input[required]:not([type="file"]), textarea[required]:not([type="file"])'),inputsRequiredLength=inputsRequired.length;if(inputsRequired)for(var i=0;i<inputsRequiredLength;i++)inputsRequired[i].addEventListener("blur",function(e){e.currentTarget.value||(e.currentTarget.style.border="1px solid red")},!1),inputsRequired[i].addEventListener("focus",function(e){"1px solid red"==e.currentTarget.style.border&&(e.currentTarget.style.border="1px solid #0085B2")},!1);var selectRequired=document.querySelectorAll("select[required]"),selectRequiredLength=selectRequired.length;if(selectRequired)for(var i=0;i<selectRequiredLength;i++)selectRequired[i].addEventListener("change",function(e){"Sélectionnez la catégorie"==e.currentTarget.options[e.currentTarget.selectedIndex].innerHTML?(e.currentTarget.parentNode.nextElementSibling.textContent="Vous devez sélectionner une catégorie",e.currentTarget.style.border="1px solid red"):"Sélectionnez le rayon"==e.currentTarget.options[e.currentTarget.selectedIndex].innerHTML?(e.currentTarget.parentNode.nextElementSibling.textContent="Vous devez sélectionner un rayon",e.currentTarget.style.border="1px solid red"):(e.currentTarget.parentNode.nextElementSibling.textContent="",e.currentTarget.style.border="1px solid transparent")},!1),selectRequired[i].addEventListener("blur",function(e){"Sélectionnez la catégorie"==e.currentTarget.options[e.currentTarget.selectedIndex].innerHTML?(e.currentTarget.parentNode.nextElementSibling.textContent="Vous devez sélectionner une catégorie",e.currentTarget.style.border="1px solid red"):"Sélectionnez le rayon"==e.currentTarget.options[e.currentTarget.selectedIndex].innerHTML?(e.currentTarget.parentNode.nextElementSibling.textContent="Vous devez sélectionner un rayon",e.currentTarget.style.border="1px solid red"):(e.currentTarget.parentNode.nextElementSibling.textContent="",e.currentTarget.style.border="1px solid transparent")},!1);var inputFile=document.getElementById("image1");inputFile&&inputFile.addEventListener("change",function(){console.log(inputFile.files)},!1);var overlay=document.getElementById("overlay"),popUpImage=document.getElementById("popUpImage"),popUpPanier=document.getElementById("popUpPanier"),imgPop=document.getElementById("imgPop"),imgPopUp=document.getElementById("imgPopUp"),imgSlider=document.querySelectorAll(".imgSlider"),imgSliderLength=imgSlider.length,containerClose=document.getElementById("containerClose"),cross=document.getElementById("cross"),leftArrow=document.getElementById("leftArrow"),rightArrow=document.getElementById("rightArrow"),imgBackgrd=document.getElementById("imgBackgrd");if(imgBackgrd){imgBackgrd.addEventListener("click",function(){var e=imgBackgrd.style.backgroundImage;overlay.style.visibility="visible",popUpImage.style.visibility="visible",popUpImage.style.opacity=1,popUpImage.style.top="50%",popUpImage.style.marginTop="-251px",popUpImage.style.backgroundImage=e},!1),overlay.addEventListener("click",function(e){popUpImage.style.visibility="hidden",popUpImage.style.top=0,popUpImage.style.opacity=0,popUpPanier.style.visibility="hidden",popUpPanier.style.top=0,popUpPanier.style.opacity=0,e.currentTarget.style.visibility="hidden"},!1),containerClose.addEventListener("click",function(){popUpImage.style.visibility="hidden",popUpImage.style.top=0,popUpImage.style.opacity=0,overlay.style.visibility="hidden"},!1),rightArrow&&leftArrow&&(rightArrow.addEventListener("click",function(){for(var e=0;e<imgSliderLength;e++)if(imgSlider[e].style.backgroundImage==popUpImage.style.backgroundImage){if(imgSlider[e].nextElementSibling.classList.contains("imgSlider")){var t=imgSlider[e].nextElementSibling.style.backgroundImage;popUpImage.style.backgroundImage=t;break}popUpImage.style.backgroundImage=imgSlider[e].parentNode.firstElementChild.nextElementSibling.style.backgroundImage;break}},!1),leftArrow.addEventListener("click",function(){for(var e=0;e<imgSliderLength;e++)if(imgSlider[e].style.backgroundImage==popUpImage.style.backgroundImage){if(imgSlider[e].previousElementSibling.classList.contains("imgSlider")){var t=imgSlider[e].previousElementSibling.style.backgroundImage;popUpImage.style.backgroundImage=t;break}popUpImage.style.backgroundImage=imgSlider[e].parentNode.lastElementChild.previousElementSibling.style.backgroundImage;break}},!1));for(var i=0;i<imgSliderLength;i++)imgSlider[i].addEventListener("click",function(e){var t=e.currentTarget.style.backgroundImage;imgBackgrd.style.backgroundImage=t;for(var r in imgSlider)e.currentTarget.className==imgSlider[r].className?(imgSlider[r].style.border="1px solid #0085b2",imgSlider[r].style.boxShadow="0 0 .3em #3d3d3d"):(imgSlider[r].style.border="1px solid transparent",imgSlider[r].style.boxShadow="0 0 .05em .035em #c2c2c2")},!1)}var formAddChart=document.getElementById("formAddChart");formAddChart&&formAddChart.addEventListener("submit",function(e){e.preventDefault();var t=encodeURIComponent(document.getElementById("id_article").value),r=encodeURIComponent(document.getElementById("nom").value),n=encodeURIComponent(document.getElementById("marque").value),i=encodeURIComponent(document.getElementById("image_1").value),o=encodeURIComponent(document.getElementById("prix").value),a=encodeURIComponent(document.getElementById("url").value),l=encodeURIComponent(document.getElementById("submit").value),s=new XMLHttpRequest;s.open("POST","/game_zone/controleurs/product-json-script.php",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("id_article="+t+"&nom="+r+"&marque="+n+"&image_1="+i+"&prix="+o+"&url="+a+"&submit="+l),s.addEventListener("readystatechange",function(){if(4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);console.log(e);var t=document.getElementById("numPanier");overlay.style.visibility="visible",popUpPanier.style.visibility="visible",popUpPanier.style.opacity=1,popUpPanier.style.top="50%",popUpPanier.style.marginTop="-125px";var r=parseInt(t.innerHTML);r+=e.quantite,t.innerHTML=r;var n=document.getElementById("nomProduct"),i=document.getElementById("marqueProduct"),o=document.getElementById("imageProduct"),a=document.getElementById("btnPanier"),l=document.getElementById("btnGo");n.innerHTML=e.nom,i.innerHTML=e.marque,o.style.background='url("'+e.image_1+'") no-repeat center 50% / 75%',a.href="/game_zone/panier",l.addEventListener("click",function(){popUpPanier.style.visibility="hidden",popUpPanier.style.top=0,popUpPanier.style.opacity=0,overlay.style.visibility="hidden"},!1)}else console.log(s)},!1)},!1);var formChartPayment=document.getElementById("formChartPayment");formChartPayment&&formChartPayment.addEventListener("submit",function(e){e.preventDefault(),submit=encodeURIComponent(document.getElementById("submitPayment").value),xhr=new XMLHttpRequest;var t=document.getElementById("cgv"),r=encodeURIComponent(t.checked);t.addEventListener("change",function(e){r=encodeURIComponent(e.currentTarget.checked)},!1),xhr.open("POST","/game_zone/controleurs/payment-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("cgvState="+r+"&submit="+submit),xhr.addEventListener("readystatechange",function(){function e(){0!=d&&(d-=1,s.innerHTML=d)}if(4===xhr.readyState&&200===xhr.status){var t=JSON.parse(xhr.responseText);console.log(t),errorMsgCGV=document.getElementById("errorMsgCGV");var r=document.getElementById("countPanier").value;t.message_cgv?errorMsgCGV.innerHTML=t.message_cgv:errorMsgCGV.innerHTML="";for(var n=0;n<r;n++)for(var i in t)if(i=="message_"+n?errorMsgCGV.innerHTML=t[i]:errorMsgCGV.innerHTML+="","msg_transaction_terminee"==i){p=parseInt(numPanier.innerHTML);p=0,numPanier.innerHTML=p;var o=document.getElementById("popUpPanierPayment"),a=document.querySelector("#popUpPanierPayment h2 span"),l=document.querySelector("#popUpPanierPayment h3"),s=document.querySelector("#popUpPanierPayment h5 span"),d=parseInt(s.innerHTML);setInterval(e,1e3),a.innerHTML=t.num_commande,l.innerHTML=t.msg_transaction_terminee,overlay.style.visibility="visible",o.style.visibility="visible",o.style.opacity=1,o.style.top="50%",o.style.marginTop="-125px",overlay.addEventListener("click",function(){document.location.href="/game_zone/panier"},!1),setTimeout(function(){document.location.href="/game_zone/panier"},1e4)}else{var p=parseInt(t.quantite_totale_panier);numPanier.innerHTML=p}}else console.log(xhr)},!1)},!1);var formTrashUser=document.querySelectorAll(".formTrashUser"),formTrashUserLength=formTrashUser.length;if(formTrashUser)for(var i=0;i<formTrashUserLength;i++)formTrashUser[i].addEventListener("submit",function(e){e.preventDefault();var t=e.currentTarget.firstElementChild,r=encodeURIComponent(t.value);confirm("Voulez-vous vraiment supprimer l'utilisateur portant l'identifiant "+r+" ?")&&(xhr=new XMLHttpRequest,xhr.open("POST","/game_zone/admin/controleurs/trashuser-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("id_membre="+r),xhr.addEventListener("readystatechange",function(){if(4===xhr.readyState&&200===xhr.status){JSON.parse(xhr.responseText);var e=t.parentNode.parentNode.parentNode;e.parentNode.removeChild(e)}else console.log(xhr)},!1))},!1);var formTrashProduct=document.querySelectorAll(".formTrashProduct"),formTrashProductLength=formTrashProduct.length;if(formTrashProduct)for(var i=0;i<formTrashProductLength;i++)formTrashProduct[i].addEventListener("submit",function(e){e.preventDefault();var t=e.currentTarget.firstElementChild,r=encodeURIComponent(t.value);confirm("Voulez-vous vraiment supprimer l'article portant l'identifiant "+r+" ?")&&(xhr=new XMLHttpRequest,xhr.open("POST","/game_zone/admin/controleurs/trashproduct-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("id_article="+r),xhr.addEventListener("readystatechange",function(){if(4===xhr.readyState&&200===xhr.status){JSON.parse(xhr.responseText);var e=t.parentNode.parentNode.parentNode;e.parentNode.removeChild(e)}else console.log(xhr)},!1))},!1);var formTrashComment=document.querySelectorAll(".formTrashComment"),formTrashCommentLength=formTrashComment.length;if(formTrashComment)for(var i=0;i<formTrashCommentLength;i++)formTrashComment[i].addEventListener("submit",function(e){e.preventDefault();var t=e.currentTarget.firstElementChild,r=encodeURIComponent(t.value);confirm("Voulez-vous vraiment supprimer le commentaire portant l'identifiant "+r+" ?")&&(xhr=new XMLHttpRequest,xhr.open("POST","/game_zone/admin/controleurs/trashcomment-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("id_avis="+r),xhr.addEventListener("readystatechange",function(){if(4===xhr.readyState&&200===xhr.status){JSON.parse(xhr.responseText);var e=t.parentNode.parentNode.parentNode;e.parentNode.removeChild(e)}else console.log(xhr)},!1))},!1);var searchForm=document.getElementById("searchForm"),searchInput=document.getElementById("searchInput"),searchSubmit=document.getElementById("searchSubmit"),searchResults=document.getElementById("searchResults"),tableResults=document.getElementById("tableResults");searchForm.addEventListener("submit",function(e){searchInput.value<1&&e.preventDefault()},!1),searchInput.addEventListener("keyup",function(e){e.currentTarget.value.length>1?(xhr=new XMLHttpRequest,xhr.open("POST","/game_zone/admin/controleurs/search-json-script.php",!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.send("search="+encodeURIComponent(e.currentTarget.value)),xhr.addEventListener("readystatechange",function(){if(4===xhr.readyState&&200===xhr.status){var e=JSON.parse(xhr.responseText);searchResults.style.visibility="visible",searchResults.style.opacity=1,searchResults.style.display="block";var t=document.querySelectorAll("tr.ligne");if(t)for(n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);for(n=0;n<e.length;n++){var r=document.createElement("tr");r.className="ligne ligne_"+n,tableResults.appendChild(r)}var n=0;for(var i in e)document.querySelector(".ligne_"+n).innerHTML='<input type="hidden" value="'+e[i].categorie_nom+'" /><input type="hidden" value="'+e[i].sous_categorie_nom+'" /><input type="hidden" value="'+e[i].id_article+'" /><input type="hidden" value="'+e[i].article_nom+'" /><td class="tdSearch" style="background: url(\''+e[i].image_1+'\') no-repeat center 50% / 55%;padding-left: 42px;"></td><td class="tdSearch">'+e[i].article_nom+'</td><td class="tdSearch" style="font-size: .7em;">'+e[i].categorie_nom.replace(/x$|s$/g,"")+'</td><td class="tdSearch" style="font-size: .65em;">'+e[i].marque+"</td>",n++;""==e&&(tableResults.innerHTML="",searchResults.style.visibility="hidden",searchResults.style.opacity=0,searchResults.style.display="none"),document.addEventListener("click",function(e){if(e.target==searchInput)searchResults.style.visibility="visible",searchResults.style.opacity=1;else if("tdSearch"!=e.target.className)tableResults.innerHTML="",searchResults.style.visibility="hidden",searchResults.style.opacity=0,searchResults.style.display="none";else{var t="/game_zone/"+e.target.parentNode.firstElementChild.value.replace(/é/g,"e").replace(/ |'/g,"-").toLowerCase()+"/"+e.target.parentNode.firstElementChild.nextElementSibling.value.replace(/é/g,"e").replace(/ |'/g,"-").toLowerCase()+"/"+e.target.parentNode.firstElementChild.nextElementSibling.nextElementSibling.value+"-"+e.target.parentNode.firstElementChild.nextElementSibling.nextElementSibling.nextElementSibling.value.replace(/é/g,"e").replace(/ |'/g,"-").toLowerCase();document.location.href=t}},!1)}else console.log(xhr)},!0)):(tableResults.innerHTML="",searchResults.style.visibility="hidden",searchResults.style.opacity=0,searchResults.style.display="none")},!1);